{
  "on_ready": {
    "description": "Bot起動時に実行される",
    "category": "event",
    "type": "block",
    "return": "multiline",
    "placeholders": ["BRANCH"],
    "template": "\n@bot.event\nasync def on_ready():\n    print(f'Logged in as {bot.user}')\n    try:\n        synced = await bot.tree.sync()\n        print(f\"Synced {len(synced)} command(s)\")\n    except Exception as e:\n        print(e)\n{{BRANCH}}\n"
  },
  "on_message_create": {
    "description": "メッセージ作成時イベント",
    "category": "event",
    "type": "block",
    "return": "multiline",
    "placeholders": ["BRANCH"],
    "template": "\n@bot.event\nasync def on_message(message):\n    if message.author == bot.user:\n        return\n    ctx = message\n    user = message.author\n{{BRANCH}}\n    await bot.process_commands(message)\n"
  },
  "on_member_join": {
    "description": "メンバー参加イベント",
    "category": "event",
    "return": "multiline",
    "placeholders": ["BRANCH"],
    "template": "\n@bot.event\nasync def on_member_join(member):\n    user = member\n    ctx = member\n{{BRANCH}}\n"
  },
  "on_member_remove": {
    "description": "メンバー退出イベント",
    "category": "event",
    "return": "multiline",
    "placeholders": ["BRANCH"],
    "template": "\n@bot.event\nasync def on_member_remove(member):\n    user = member\n    ctx = member\n{{BRANCH}}\n"
  },
  "on_command_executed": {
    "description": "スラッシュコマンドを生成",
    "category": "command",
    "return": "multiline",
    "placeholders": ["COMMAND_NAME", "BRANCH"],
    "template": "\n@bot.tree.command(name=\"{{COMMAND_NAME}}\", description=\"{{COMMAND_NAME}} command\")\nasync def {{COMMAND_NAME}}_cmd(interaction: discord.Interaction):\n    ctx = interaction\n    user = interaction.user\n{{BRANCH}}\n"
  },
  "prefix_command": {
    "description": "Prefix コマンドを生成",
    "category": "command",
    "return": "multiline",
    "placeholders": ["COMMAND_NAME", "BRANCH"],
    "template": "\n@bot.command(name='{{COMMAND_NAME}}')\nasync def {{COMMAND_NAME}}_cmd(ctx):\n    user = ctx.author\n{{BRANCH}}\n"
  },
  "get_message_content": {
    "description": "メッセージ本文取得",
    "category": "util",
    "return": "expression",
    "placeholders": [],
    "template": "(ctx.content if \"ctx\" in locals() and hasattr(ctx, \"content\") else \"\")"
  },
  "get_user_info": {
    "description": "user.name / user.display_name / user.id などを取得",
    "category": "user",
    "return": "expression",
    "placeholders": ["FIELD"],
    "template": "(user.{{FIELD}} if \"user\" in locals() else \"Unknown\")"
  },
  "get_member_detail": {
    "description": "メンバー詳細情報（joined_at, avatar.url など）",
    "category": "user",
    "return": "expression",
    "placeholders": ["CODE"],
    "template": "({{CODE}} if \"user\" in locals() else \"Unknown\")"
  },
  "get_channel_info": {
    "description": "ctx.channel.xxx の値を取得する",
    "category": "channel",
    "return": "expression",
    "placeholders": ["FIELD"],
    "template": "(ctx.channel.{{FIELD}} if \"ctx\" in locals() and hasattr(ctx, \"channel\") else \"Unknown\")"
  },
  "get_server_info": {
    "description": "ctx.guild.xxx の情報取得",
    "category": "server",
    "return": "expression",
    "placeholders": ["FIELD"],
    "template": "(ctx.guild.{{FIELD}} if \"ctx\" in locals() and hasattr(ctx, \"guild\") and ctx.guild else \"Unknown\")"
  },
  "reply_message": {
    "description": "メッセージへの返信 + Interaction 対応",
    "category": "message",
    "return": "multiline",
    "placeholders": ["MESSAGE", "EPHEMERAL"],
    "template": "\nif 'ctx' in locals():\n    if isinstance(ctx, discord.Interaction):\n        if ctx.response.is_done():\n            await ctx.followup.send({{MESSAGE}}, ephemeral={{EPHEMERAL}})\n        else:\n            await ctx.response.send_message({{MESSAGE}}, ephemeral={{EPHEMERAL}})\n    elif isinstance(ctx, commands.Context):\n        await ctx.send({{MESSAGE}})\n    elif isinstance(ctx, discord.Message):\n        await ctx.reply({{MESSAGE}})\n"
  },
  "send_dm": {
    "description": "DM送信",
    "category": "message",
    "return": "multiline",
    "placeholders": ["USER_ID", "MESSAGE"],
    "template": "\n_u_dm = bot.get_user(int({{USER_ID}})) or await bot.fetch_user(int({{USER_ID}}))\nif _u_dm:\n    await _u_dm.send({{MESSAGE}})\n"
  },
  "defer_reply": {
    "description": "応答延期（defer）",
    "category": "interaction",
    "return": "multiline",
    "placeholders": ["EPHEMERAL"],
    "template": "\nif 'ctx' in locals():\n    if isinstance(ctx, discord.Interaction):\n        await ctx.response.defer(ephemeral={{EPHEMERAL}})\n    elif isinstance(ctx, commands.Context):\n        async with ctx.typing(): pass\n"
  },
  "edit_reply": {
    "description": "Interaction の返信編集",
    "category": "message",
    "return": "multiline",
    "placeholders": ["MESSAGE"],
    "template": "\nif 'ctx' in locals() and isinstance(ctx, discord.Interaction):\n    await ctx.edit_original_response({{MESSAGE}})\n"
  },
  "send_channel_message": {
    "description": "チャンネルにメッセージ送信",
    "category": "message",
    "return": "multiline",
    "placeholders": ["CHANNEL_ID", "MESSAGE"],
    "template": "\n_ch_id = int({{CHANNEL_ID}}) if str({{CHANNEL_ID}}).isdigit() else 0\n_channel = bot.get_channel(_ch_id)\nif _channel:\n    await _channel.send({{MESSAGE}})\n"
  },

  "delete_message": {
    "description": "ctx のメッセージを削除",
    "category": "message",
    "return": "multiline",
    "placeholders": [],
    "template": "\nif 'ctx' in locals():\n    if isinstance(ctx, discord.Message):\n        await ctx.delete()\n    elif isinstance(ctx, commands.Context):\n        await ctx.message.delete()\n"
  },

  "purge_messages": {
    "description": "メッセージ一括削除",
    "category": "message",
    "return": "multiline",
    "placeholders": ["LIMIT"],
    "template": "\nif 'ctx' in locals() and hasattr(ctx, 'channel') and hasattr(ctx.channel, 'purge'):\n    await ctx.channel.purge(limit=int({{LIMIT}}))\n"
  },

  "pin_message": {
    "description": "メッセージをピン留め",
    "category": "message",
    "return": "multiline",
    "placeholders": [],
    "template": "\nif 'ctx' in locals():\n    if isinstance(ctx, discord.Message):\n        await ctx.pin()\n    elif isinstance(ctx, commands.Context):\n        await ctx.message.pin()\n"
  },

  "add_reaction": {
    "description": "リアクション追加",
    "category": "reaction",
    "return": "multiline",
    "placeholders": ["EMOJI"],
    "template": "\ntry:\n    if 'ctx' in locals():\n        if isinstance(ctx, discord.Message):\n            await ctx.add_reaction({{EMOJI}})\n        elif isinstance(ctx, commands.Context):\n            await ctx.message.add_reaction({{EMOJI}})\nexcept Exception:\n    pass\n"
  },

  "create_thread": {
    "description": "スレッド作成",
    "category": "thread",
    "return": "multiline",
    "placeholders": ["NAME"],
    "template": "\ntry:\n    if 'ctx' in locals():\n        if isinstance(ctx, discord.Message):\n            await ctx.create_thread(name={{NAME}})\n        elif isinstance(ctx, commands.Context):\n            await ctx.message.create_thread(name={{NAME}})\nexcept Exception:\n    pass\n"
  },

  "wait_for_message": {
    "description": "メッセージを待機して内容を返す",
    "category": "async",
    "return": "expression",
    "placeholders": ["TIMEOUT"],
    "template": "((await bot.wait_for('message', check=lambda m: m.channel == ctx.channel and m.author == user, timeout={{TIMEOUT}})).content if 'ctx' in locals() and 'user' in locals() else None)"
  },

  "print_to_console": {
    "description": "print() でコンソール出力",
    "category": "util",
    "return": "multiline",
    "placeholders": ["TEXT"],
    "template": "print({{TEXT}})\n"
  },

  "join_voice_channel": {
    "description": "VC に参加",
    "category": "voice",
    "return": "multiline",
    "placeholders": [],
    "template": "\nif 'user' in locals() and user.voice:\n    await user.voice.channel.connect()\n"
  },

  "leave_voice_channel": {
    "description": "VC から退出",
    "category": "voice",
    "return": "multiline",
    "placeholders": [],
    "template": "\nif 'ctx' in locals() and ctx.guild.voice_client:\n    await ctx.guild.voice_client.disconnect()\n"
  },

  "play_audio_file": {
    "description": "音声ファイルを VC で再生",
    "category": "voice",
    "return": "multiline",
    "placeholders": ["FILEPATH"],
    "template": "\nif 'ctx' in locals() and ctx.guild.voice_client:\n    if not ctx.guild.voice_client.is_playing():\n        ctx.guild.voice_client.play(discord.FFmpegPCMAudio({{FILEPATH}}))\n"
  },

  "create_text_channel": {
    "description": "テキストチャンネル作成",
    "Category": "server",
    "return": "multiline",
    "placeholders": ["NAME"],
    "template": "\nif 'ctx' in locals() and ctx.guild:\n    await ctx.guild.create_text_channel(name={{NAME}})\n"
  },

  "delete_channel": {
    "description": "チャンネル削除",
    "category": "server",
    "return": "multiline",
    "placeholders": ["CHANNEL_ID"],
    "template": "\n_ch = bot.get_channel(int({{CHANNEL_ID}}))\nif _ch:\n    await _ch.delete()\n"
  },

  "set_bot_status": {
    "description": "Bot のプレゼンス設定",
    "category": "presence",
    "return": "multiline",
    "placeholders": ["STATUS", "ACTIVITY"],
    "template": "await bot.change_presence(activity={{ACTIVITY}})\n"
  },

  "wait_seconds": {
    "description": "任意の秒数待機",
    "category": "async",
    "return": "multiline",
    "placeholders": ["SECONDS"],
    "template": "await asyncio.sleep({{SECONDS}})\n"
  },

  "create_embed": {
    "description": "Embed オブジェクト生成",
    "category": "embed",
    "return": "expression",
    "placeholders": ["EMBED_NAME", "PROPERTIES"],
    "template": "{{EMBED_NAME}} = discord.Embed(title=\"No Title\", description=\"...\", color=0x3498DB)\n{{PROPERTIES}}\n"
  },

  "set_embed_property": {
    "description": "Embed プロパティを設定",
    "category": "embed",
    "return": "multiline",
    "placeholders": ["PROPERTY", "VALUE"],
    "template": "embed.{{PROPERTY}} = {{VALUE}}\n"
  },

  "add_embed_field": {
    "description": "Embed にフィールド追加",
    "category": "embed",
    "return": "multiline",
    "placeholders": ["NAME", "VALUE", "INLINE"],
    "template": "# EMBED_VAR_PLACEHOLDER.add_field(name={{NAME}}, value={{VALUE}}, inline={{INLINE}})\n"
  },

  "kick_user": {
    "description": "ユーザーを Kick",
    "category": "admin",
    "return": "multiline",
    "placeholders": ["USER_ID", "REASON"],
    "template": "\nif 'ctx' in locals() and ctx.guild:\n    _m = ctx.guild.get_member(int({{USER_ID}}))\n    if _m: await _m.kick(reason={{REASON}})\n"
  },

  "ban_user": {
    "description": "ユーザーを Ban",
    "category": "admin",
    "return": "multiline",
    "placeholders": ["USER_ID", "REASON"],
    "template": "\nif 'ctx' in locals() and ctx.guild:\n    _m = ctx.guild.get_member(int({{USER_ID}}))\n    if _m: await _m.ban(reason={{REASON}})\n"
  },

  "timeout_user": {
    "description": "ユーザーを一定時間ミュート",
    "category": "admin",
    "return": "multiline",
    "placeholders": ["USER_ID", "MINUTES"],
    "template": "\nif 'ctx' in locals() and ctx.guild:\n    _m = ctx.guild.get_member(int({{USER_ID}}))\n    if _m:\n        await _m.timeout(datetime.timedelta(minutes=int({{MINUTES}})))\n"
  },

  "add_user_role": {
    "description": "ユーザーにロールを付与",
    "category": "admin",
    "return": "multiline",
    "placeholders": ["USER_ID", "ROLE_ID"],
    "template": "\nif 'ctx' in locals() and ctx.guild:\n    _m = ctx.guild.get_member(int({{USER_ID}}))\n    _r = ctx.guild.get_role(int({{ROLE_ID}}))\n    if _m and _r: await _m.add_roles(_r)\n"
  },

  "remove_user_role": {
    "description": "ユーザーからロール削除",
    "category": "admin",
    "return": "multiline",
    "placeholders": ["USER_ID", "ROLE_ID"],
    "template": "\nif 'ctx' in locals() and ctx.guild:\n    _m = ctx.guild.get_member(int({{USER_ID}}))\n    _r = ctx.guild.get_role(int({{ROLE_ID}}))\n    if _m and _r: await _m.remove_roles(_r)\n"
  },

  "change_nickname": {
    "description": "ユーザーのニックネームを変更",
    "category": "admin",
    "return": "multiline",
    "placeholders": ["USER_ID", "NAME"],
    "template": "\nif 'ctx' in locals() and ctx.guild:\n    _m = ctx.guild.get_member(int({{USER_ID}}))\n    if _m: await _m.edit(nick={{NAME}})\n"
  },

  "procedures_def": {
    "description": "関数定義（共通版）",
    "category": "function",
    "return": "multiline",
    "placeholders": ["FUNC_NAME", "ARGS", "BRANCH", "RETURN"],
    "template": "\nasync def {{FUNC_NAME}}({{ARGS}}):\n{{BRANCH}}\n{{RETURN}}\n"
  },

  "procedures_call": {
    "description": "関数呼び出し",
    "category": "function",
    "return": "multiline",
    "placeholders": ["FUNC_NAME", "ARGS"],
    "template": "await {{FUNC_NAME}}({{ARGS}})\n"
  },

  "lists_create_with": {
    "description": "リスト作成",
    "category": "list",
    "return": "expression",
    "placeholders": ["ELEMENTS"],
    "template": "[{{ELEMENTS}}]"
  },

  "lists_length": {
    "description": "リストの長さ取得",
    "category": "list",
    "return": "expression",
    "placeholders": ["LIST"],
    "template": "len({{LIST}})"
  },

  "lists_append_to": {
    "description": "リストに値を追加",
    "category": "list",
    "return": "multiline",
    "placeholders": ["LIST", "ITEM"],
    "template": "{{LIST}}.append({{ITEM}})\n"
  },
  "lists_getIndex": {
    "description": "リストの指定位置の要素を取得",
    "category": "list",
    "return": "expression",
    "placeholders": ["LIST", "INDEX"],
    "template": "{{LIST}}[{{INDEX}}]"
  },

  "lists_setIndex": {
    "description": "リストの指定位置に値をセット",
    "category": "list",
    "return": "multiline",
    "placeholders": ["LIST", "INDEX", "VALUE"],
    "template": "{{LIST}}[{{INDEX}}] = {{VALUE}}\n"
  },

  "random_choice": {
    "description": "リストからランダム取得",
    "category": "random",
    "return": "expression",
    "placeholders": ["LIST"],
    "template": "random.choice({{LIST}})"
  },

  "random_integer": {
    "description": "範囲内のランダム整数",
    "category": "random",
    "return": "expression",
    "placeholders": ["FROM", "TO"],
    "template": "random.randint(int({{FROM}}), int({{TO}}))"
  },

  "text_replace": {
    "description": "文字列置換",
    "category": "text",
    "return": "expression",
    "placeholders": ["TEXT", "FROM", "TO"],
    "template": "str({{TEXT}}).replace(str({{FROM}}), str({{TO}}))"
  },

  "text_charAt": {
    "description": "文字列から指定位置の文字を取得",
    "category": "text",
    "return": "expression",
    "placeholders": ["VALUE", "WHERE", "AT"],
    "template": "(lambda _text, _where, _at_raw: (lambda _at: (_text[int(_at) - 1] if _where == 'FROM_START' else (_text[0] if _where == 'FIRST' else (_text[-1] if _where == 'LAST' else (_text[-int(_at)] if _where == 'FROM_END' else _text[0])))))(_at_raw if str(_at_raw).strip() not in ('', 'None') else 1))({{VALUE}}, '{{WHERE}}', {{AT}})"
  },

  "controls_if": {
    "description": "if / elif / else 制御構文",
    "category": "logic",
    "return": "multiline",
    "placeholders": ["CONDITION_BLOCK"],
    "template": "{{CONDITION_BLOCK}}"
  },

  "send_button_message": {
    "description": "ボタン付きメッセージを送信する",
    "category": "interaction",
    "return": "multiline",
    "placeholders": ["MESSAGE", "LABEL", "CUSTOM_ID"],
    "template": "\nview = discord.ui.View()\nview.add_item(discord.ui.Button(label=\"{{LABEL}}\", custom_id=\"{{CUSTOM_ID}}\"))\nif 'ctx' in locals():\n    if isinstance(ctx, discord.Interaction):\n        await ctx.response.send_message(content={{MESSAGE}}, view=view)\n    else:\n        await ctx.send(content={{MESSAGE}}, view=view)\n"
  },

  "on_button_click": {
    "description": "ボタンクリックイベント",
    "category": "interaction",
    "return": "multiline",
    "placeholders": ["CUSTOM_ID", "BRANCH"],
    "template": "\n# BUTTON_EVENT:{{CUSTOM_ID}}\nasync def on_button_{{CUSTOM_ID}}(interaction):\n    ctx = interaction\n    user = interaction.user\n    await interaction.response.defer()\n{{BRANCH}}\n"
  },

  "show_modal": {
    "description": "モーダルを表示する",
    "category": "modal",
    "return": "multiline",
    "placeholders": ["TITLE", "CUSTOM_ID", "INPUTS"],
    "template": "\nif 'ctx' in locals() and isinstance(ctx, discord.Interaction):\n    await ctx.response.send_modal(EasyModal(title=\"{{TITLE}}\", custom_id=\"{{CUSTOM_ID}}\", inputs={{INPUTS}}))\n"
  },

  "on_modal_submit": {
    "description": "モーダル送信イベント",
    "category": "modal",
    "return": "multiline",
    "placeholders": ["CUSTOM_ID", "BRANCH"],
    "template": "\n# MODAL_EVENT:{{CUSTOM_ID}}\nasync def on_modal_{{CUSTOM_ID}}(interaction):\n    ctx = interaction\n    user = interaction.user\n    await interaction.response.defer()\n{{BRANCH}}\n"
  },

  "get_input_value": {
    "description": "モーダルの入力値取得",
    "category": "modal",
    "return": "expression",
    "placeholders": ["INDEX"],
    "template": "interaction.data['components'][0]['components'][{{INDEX}}]['value']"
  },

  "dict_create": {
    "description": "空の辞書を作成",
    "category": "json",
    "return": "expression",
    "placeholders": [],
    "template": "{}"
  },

  "dict_get": {
    "description": "辞書からキーの値を取得",
    "category": "json",
    "return": "expression",
    "placeholders": ["DICT", "KEY"],
    "template": "{{DICT}}.get({{KEY}})"
  },

  "dict_set": {
    "description": "辞書にキーと値を追加",
    "category": "json",
    "return": "multiline",
    "placeholders": ["DICT", "KEY", "VALUE"],
    "template": "{{DICT}}[{{KEY}}] = {{VALUE}}\n"
  },

  "json_load": {
    "description": "JSON ファイルを読み込む",
    "category": "json",
    "return": "expression",
    "placeholders": ["FILENAME"],
    "template": "_load_json_data({{FILENAME}})"
  },

  "json_save": {
    "description": "JSON を保存する",
    "category": "json",
    "return": "multiline",
    "placeholders": ["DATA", "FILENAME"],
    "template": "_save_json_data({{FILENAME}}, {{DATA}})\n"
  },

  "custom_python_code": {
    "description": "自由な Python コードを挿入",
    "category": "advanced",
    "return": "multiline",
    "placeholders": ["CODE"],
    "template": "{{CODE}}\n"
  },

  "get_command_arg": {
    "description": "コマンド引数へのアクセス（未実装）",
    "category": "command",
    "return": "expression",
    "placeholders": ["ARG_NAME"],
    "template": "\"# Argument '{{ARG_NAME}}' needed\""
  },

  "procedures_defnoreturn": {
    "description": "戻り値なし関数の定義",
    "category": "function",
    "return": "multiline",
    "placeholders": ["FUNC_NAME", "ARGS", "BRANCH"],
    "template": "\nasync def {{FUNC_NAME}}({{ARGS}}):\n{{BRANCH}}\n"
  },

  "procedures_defreturn": {
    "description": "戻り値あり関数の定義",
    "category": "function",
    "return": "multiline",
    "placeholders": ["FUNC_NAME", "ARGS", "BRANCH", "RETURN"],
    "template": "\nasync def {{FUNC_NAME}}({{ARGS}}):\n{{BRANCH}}\n{{RETURN}}\n"
  },

  "procedures_callnoreturn": {
    "description": "戻り値なし関数の呼び出し",
    "category": "function",
    "return": "multiline",
    "placeholders": ["FUNC_NAME", "ARGS"],
    "template": "await {{FUNC_NAME}}({{ARGS}})\n"
  },

  "procedures_callreturn": {
    "description": "戻り値あり関数の呼び出し",
    "category": "function",
    "return": "expression",
    "placeholders": ["FUNC_NAME", "ARGS"],
    "template": "await {{FUNC_NAME}}({{ARGS}})"
  },

  "embed_property_color": {
    "description": "Embed の色設定",
    "category": "embed",
    "return": "multiline",
    "placeholders": ["COLOR"],
    "template": "embed.color = {{COLOR}}\n"
  },

  "embed_property_title": {
    "description": "Embed のタイトル設定",
    "category": "embed",
    "return": "multiline",
    "placeholders": ["TITLE"],
    "template": "embed.title = {{TITLE}}\n"
  },

  "embed_property_description": {
    "description": "Embed の説明文設定",
    "category": "embed",
    "return": "multiline",
    "placeholders": ["TEXT"],
    "template": "embed.description = {{TEXT}}\n"
  },

  "embed_property_image": {
    "description": "Embed の画像設定",
    "category": "embed",
    "return": "multiline",
    "placeholders": ["URL"],
    "template": "embed.set_image(url={{URL}})\n"
  },
  "on_reaction_add": {
    "description": "リアクション追加イベント",
    "category": "event",
    "return": "multiline",
    "placeholders": ["MESSAGE_ID", "EMOJI", "BRANCH"],
    "template": "\n@bot.event\nasync def on_raw_reaction_add(payload):\n    if payload.user_id == bot.user.id:\n        return\n    if '{{MESSAGE_ID}}' and str(payload.message_id) != '{{MESSAGE_ID}}':\n        return\n    if '{{EMOJI}}' and str(payload.emoji) != '{{EMOJI}}':\n        return\n    channel = bot.get_channel(payload.channel_id)\n    message = await channel.fetch_message(payload.message_id)\n    user = payload.member or bot.get_user(payload.user_id)\n    ctx = message\n{{BRANCH}}\n"
  },

  "controls_if_block": {
    "description": "if / elif / else ロジックの本体展開",
    "category": "logic",
    "return": "multiline",
    "placeholders": ["BLOCK"],
    "template": "{{BLOCK}}"
  },

  "create_thread_alt": {
    "description": "スレッド作成（代替パターン）",
    "category": "thread",
    "return": "multiline",
    "placeholders": ["NAME"],
    "template": "\ntry:\n    if 'ctx' in locals():\n        await ctx.channel.create_thread(name={{NAME}})\nexcept Exception:\n    pass\n"
  },

  "send_button_message_alt": {
    "description": "ボタン付きメッセージ（フォールバック）",
    "category": "interaction",
    "return": "multiline",
    "placeholders": ["MESSAGE", "LABEL", "CUSTOM_ID"],
    "template": "\nview = discord.ui.View()\nview.add_item(discord.ui.Button(label=\"{{LABEL}}\", custom_id=\"{{CUSTOM_ID}}\"))\nif 'ctx' in locals():\n    await ctx.send(content={{MESSAGE}}, view=view)\n"
  },

  "controls_if_inline": {
    "description": "if 構文のインライン組み立て（内部用）",
    "category": "logic",
    "return": "multiline",
    "placeholders": ["IF_PARTS"],
    "template": "{{IF_PARTS}}"
  },

  "text_concat": {
    "description": "文字列結合",
    "category": "text",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "str({{A}}) + str({{B}})"
  },

  "text_to_string": {
    "description": "任意の値を文字列へ変換",
    "category": "text",
    "return": "expression",
    "placeholders": ["VALUE"],
    "template": "str({{VALUE}})"
  },

  "logic_compare": {
    "description": "比較演算子（==、!=、>、<、>=、<=）",
    "category": "logic",
    "return": "expression",
    "placeholders": ["A", "OP", "B"],
    "template": "({{A}} {{OP}} {{B}})"
  },

  "logic_boolean": {
    "description": "真偽値リテラル (True/False)",
    "category": "logic",
    "return": "expression",
    "placeholders": ["VALUE"],
    "template": "{{VALUE}}"
  },

  "logic_and": {
    "description": "論理 AND",
    "category": "logic",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "({{A}} and {{B}})"
  },

  "logic_or": {
    "description": "論理 OR",
    "category": "logic",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "({{A}} or {{B}})"
  },

  "logic_not": {
    "description": "論理 NOT",
    "category": "logic",
    "return": "expression",
    "placeholders": ["A"],
    "template": "(not {{A}})"
  },

  "math_add": {
    "description": "加算",
    "category": "math",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "({{A}} + {{B}})"
  },

  "math_subtract": {
    "description": "減算",
    "category": "math",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "({{A}} - {{B}})"
  },

  "math_multiply": {
    "description": "乗算",
    "category": "math",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "({{A}} * {{B}})"
  },

  "math_divide": {
    "description": "除算",
    "category": "math",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "({{A}} / {{B}})"
  },

  "math_modulo": {
    "description": "剰余 (%)",
    "category": "math",
    "return": "expression",
    "placeholders": ["A", "B"],
    "template": "({{A}} % {{B}})"
  },

  "math_random_float": {
    "description": "0〜1 のランダム小数",
    "category": "random",
    "return": "expression",
    "placeholders": [],
    "template": "random.random()"
  },

  "convert_int": {
    "description": "整数に変換",
    "category": "convert",
    "return": "expression",
    "placeholders": ["VALUE"],
    "template": "int({{VALUE}})"
  },

  "convert_float": {
    "description": "浮動小数に変換",
    "category": "convert",
    "return": "expression",
    "placeholders": ["VALUE"],
    "template": "float({{VALUE}})"
  },

  "convert_bool": {
    "description": "ブール値に変換",
    "category": "convert",
    "return": "expression",
    "placeholders": ["VALUE"],
    "template": "bool({{VALUE}})"
  },

  "convert_json": {
    "description": "文字列を JSON として読み込む",
    "category": "json",
    "return": "expression",
    "placeholders": ["VALUE"],
    "template": "json.loads({{VALUE}})"
  },

  "string_format": {
    "description": "format() による文字列整形",
    "category": "text",
    "return": "expression",
    "placeholders": ["TEXT", "ARGS"],
    "template": "{{TEXT}}.format({{ARGS}})"
  },

  "get_message_author_id": {
    "description": "ctx.author.id を返す",
    "category": "message",
    "return": "expression",
    "placeholders": [],
    "template": "(ctx.author.id if 'ctx' in locals() else None)"
  },

  "get_message_channel_id": {
    "description": "ctx.channel.id を返す",
    "category": "message",
    "return": "expression",
    "placeholders": [],
    "template": "(ctx.channel.id if 'ctx' in locals() and hasattr(ctx, 'channel') else None)"
  },

  "get_guild_id": {
    "description": "ctx.guild.id を返す",
    "category": "server",
    "return": "expression",
    "placeholders": [],
    "template": "(ctx.guild.id if 'ctx' in locals() and hasattr(ctx, 'guild') else None)"
  },

  "log_debug": {
    "description": "デバッグ用ログ出力",
    "category": "util",
    "return": "multiline",
    "placeholders": ["TEXT"],
    "template": "print('[DEBUG]', {{TEXT}})\n"
  },
  "sleep_until": {
    "description": "指定した日時まで待機する",
    "category": "async",
    "return": "multiline",
    "placeholders": ["DATETIME"],
    "template": "target_dt = datetime.datetime.fromisoformat({{DATETIME}})\nnow = datetime.datetime.now()\ndiff = (target_dt - now).total_seconds()\nif diff > 0:\n    await asyncio.sleep(diff)\n"
  },

  "send_raw_webhook": {
    "description": "Webhook URL に直接 POST",
    "category": "webhook",
    "return": "multiline",
    "placeholders": ["URL", "DATA"],
    "template": "import aiohttp\nasync with aiohttp.ClientSession() as session:\n    await session.post({{URL}}, json={{DATA}})\n"
  },

  "http_get_json": {
    "description": "HTTP GET で JSON を取得",
    "category": "http",
    "return": "expression",
    "placeholders": ["URL"],
    "template": "(await (await aiohttp.ClientSession().get({{URL}})).json())"
  },

  "http_get_text": {
    "description": "HTTP GET のレスポンス文字列",
    "category": "http",
    "return": "expression",
    "placeholders": ["URL"],
    "template": "(await (await aiohttp.ClientSession().get({{URL}})).text())"
  },

  "http_post_json": {
    "description": "HTTP POST で JSON を送信して JSON を受け取る",
    "category": "http",
    "return": "expression",
    "placeholders": ["URL", "DATA"],
    "template": "(await (await aiohttp.ClientSession().post({{URL}}, json={{DATA}})).json())"
  },

  "datetime_now": {
    "description": "現在時刻を datetime で取得",
    "category": "datetime",
    "return": "expression",
    "placeholders": [],
    "template": "datetime.datetime.now()"
  },

  "datetime_format": {
    "description": "datetime.strftime によるフォーマット",
    "category": "datetime",
    "return": "expression",
    "placeholders": ["DATETIME", "FORMAT"],
    "template": "{{DATETIME}}.strftime({{FORMAT}})"
  },

  "datetime_parse": {
    "description": "ISO 8601 日時文字列をパース",
    "category": "datetime",
    "return": "expression",
    "placeholders": ["TEXT"],
    "template": "datetime.datetime.fromisoformat({{TEXT}})"
  },

  "eval_python_expression": {
    "description": "任意の Python 式を評価（安全注意）",
    "category": "advanced",
    "return": "expression",
    "placeholders": ["EXPR"],
    "template": "eval({{EXPR}})"
  },

  "exec_python_block": {
    "description": "任意の Python 文を実行（安全注意）",
    "category": "advanced",
    "return": "multiline",
    "placeholders": ["CODE"],
    "template": "exec({{CODE}})\n"
  },

  "store_variable": {
    "description": "変数へ値を保存",
    "category": "variable",
    "return": "multiline",
    "placeholders": ["NAME", "VALUE"],
    "template": "{{NAME}} = {{VALUE}}\n"
  },

  "load_variable": {
    "description": "変数の値を返す",
    "category": "variable",
    "return": "expression",
    "placeholders": ["NAME"],
    "template": "{{NAME}}"
  },

  "append_to_global_list": {
    "description": "グローバルリストに追加",
    "category": "variable",
    "return": "multiline",
    "placeholders": ["LIST", "ITEM"],
    "template": "{{LIST}}.append({{ITEM}})\n"
  },

  "lambda_function": {
    "description": "lambda 関数を生成",
    "category": "function",
    "return": "expression",
    "placeholders": ["ARGS", "BODY"],
    "template": "(lambda {{ARGS}}: {{BODY}})"
  },

  "foreach_in_list": {
    "description": "for 文でリストを反復処理",
    "category": "loop",
    "return": "multiline",
    "placeholders": ["VAR", "LIST", "BODY"],
    "template": "for {{VAR}} in {{LIST}}:\n{{BODY}}\n"
  },

  "while_loop": {
    "description": "while 文ループ",
    "category": "loop",
    "return": "multiline",
    "placeholders": ["COND", "BODY"],
    "template": "while {{COND}}:\n{{BODY}}\n"
  },

  "break_statement": {
    "description": "ループを break",
    "category": "loop",
    "return": "multiline",
    "placeholders": [],
    "template": "break\n"
  },

  "continue_statement": {
    "description": "ループを continue",
    "category": "loop",
    "return": "multiline",
    "placeholders": [],
    "template": "continue\n"
  },

  "try_catch": {
    "description": "try-except 構文ブロック",
    "category": "logic",
    "return": "multiline",
    "placeholders": ["TRY", "EXCEPT"],
    "template": "try:\n{{TRY}}\nexcept Exception as e:\n{{EXCEPT}}\n"
  },

  "raise_error": {
    "description": "例外を発生させる",
    "category": "logic",
    "return": "multiline",
    "placeholders": ["MESSAGE"],
    "template": "raise Exception({{MESSAGE}})\n"
  },

  "function_return": {
    "description": "return 文を出力",
    "category": "function",
    "return": "multiline",
    "placeholders": ["VALUE"],
    "template": "return {{VALUE}}\n"
  },

  "noop": {
    "description": "何もしない（pass）",
    "category": "util",
    "return": "multiline",
    "placeholders": [],
    "template": "pass\n"
  },
  "create_role": {
    "description": "ロールを新規作成",
    "category": "server",
    "return": "multiline",
    "placeholders": ["NAME"],
    "template": "\nif 'ctx' in locals():\n        if isinstance(ctx, discord.Interaction):\n            if ctx.response.is_done():\n                await ctx.followup.send(content={{NAME}}+'を新規作成しました。', ephemeral=True)\n            else:\n                await ctx.response.send_message(content={{NAME}}+'を新規作成しました。', ephemeral=True)\n        elif isinstance(ctx, commands.Context):\n            await ctx.send(content={{NAME}}+'を新規作成しました。')\n        elif isinstance(ctx, discord.Message):\n            await ctx.reply(content={{NAME}}+'を新規作成しました。')"

  }
}





